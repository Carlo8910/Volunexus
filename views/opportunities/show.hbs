<div class="bg-white rounded-lg shadow-md p-6">
  <div class="flex justify-between items-start">
    <h1 class="text-2xl font-bold text-gray-800 mb-2">{{opportunity.title}}</h1>
    
    {{#if user}}
      {{#if (eq user.id opportunity.createdBy._id)}}
        <div class="flex space-x-2">
          <a href="/opportunities/edit/{{opportunity._id}}" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm">
            Edit
          </a>
          <form action="/opportunities/{{opportunity._id}}?_method=DELETE" method="POST" onsubmit="return confirm('Are you sure you want to delete this opportunity?');">
            <button type="submit" class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm">
              Delete
            </button>
          </form>
        </div>
      {{else}}
        {{#if (eq user.role "volunteer")}}
          {{#if isAttending}}
            <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm">You're attending</span>
          {{else}}
            <form action="/opportunities/attend/{{opportunity._id}}?_method=PUT" method="POST">
              <button type="submit" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded">
                Attend Event
              </button>
            </form>
          {{/if}}
        {{/if}}
      {{/if}}
    {{/if}}
  </div>
  
  <p class="text-gray-600 mb-6">
    Created by: {{opportunity.createdBy.name}}
  </p>
  
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
    <div class="bg-gray-50 p-4 rounded">
      <h3 class="font-semibold text-gray-700 mb-2">Date & Time</h3>
      <p>{{formatDate opportunity.dateTime "dddd, MMMM DD, YYYY"}}</p>
      <p>{{formatDate opportunity.dateTime "h:mm A"}}</p>
    </div>
    
    <div class="bg-gray-50 p-4 rounded">
      <h3 class="font-semibold text-gray-700 mb-2">Duration</h3>
      <p>{{opportunity.duration}} hours</p>
      <p class="text-sm text-gray-500">{{multiply opportunity.duration 10}} points</p>
    </div>
    
    <div class="bg-gray-50 p-4 rounded">
      <h3 class="font-semibold text-gray-700 mb-2">Category</h3>
      <span class="inline-block bg-green-100 text-green-800 px-3 py-1 rounded-full">
        {{opportunity.tag}}
      </span>
    </div>
  </div>
  
  <div class="mb-6">
    <h3 class="font-semibold text-gray-700 mb-2">Description</h3>
    <p class="text-gray-700 whitespace-pre-line">{{opportunity.description}}</p>
  </div>
  
  <div class="mb-6">
    <h3 class="font-semibold text-gray-700 mb-2">Location</h3>
    <p class="mb-2">{{opportunity.location.address}}</p>
    <div id="map" class="w-full h-64 rounded-lg border" data-lat="{{opportunity.location.coordinates.coordinates.[1]}}" data-lng="{{opportunity.location.coordinates.coordinates.[0]}}"></div>
  </div>
  
  {{#if opportunity.attendees.length}}
    <div>
      <h3 class="font-semibold text-gray-700 mb-2">Attendees</h3>
      <p>{{opportunity.attendees.length}} volunteer(s) attending</p>
    </div>
  {{/if}}
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Initialize map (actual implementation in opportunity.js)
    if (typeof showOpportunityMap === 'function') {
      const mapElement = document.getElementById('map');
      const lat = parseFloat(mapElement.dataset.lat);
      const lng = parseFloat(mapElement.dataset.lng);
      showOpportunityMap(lat, lng);
    }
  });
</script> 